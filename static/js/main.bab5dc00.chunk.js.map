{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["Marker","children","Loading","className","src","alt","ErrorDataRequest","App","proxyurl","useState","page","SetPage","poiTable","SetPoiTable","filteredPoi","SetFilteredPoi","poiGeo","SetPoiGeo","dataType","SetDatatype","hourlyStats","SetHourlyStats","dailyStats","SetDailyStats","hourlyEvent","SetHourlyEvent","dailyEvent","SetDailyEvent","eventVisual","SetEventVisual","eventVisualSelected","SetEventVisualSelected","hourlyEventError","SetHourlyEventError","dailyEventError","SetDailyEventError","hourlyStatsError","SetHourlyStatsError","dailyStatsError","SetDailyStatsError","poiError","SetPoiError","useEffect","fetch","then","response","json","data","array","forEach","element","push","Date","date","toDateString","parseInt","events","hour","catch","err","console","error","impressions","clicks","revenue","arrTable","v","poi_id","f","toString","p","style","name","lat","lon","mapRef","useRef","bounds","setBounds","zoom","setZoom","points","length","slice","map","poi","type","properties","cluster","poiId","geometry","coordinates","parseFloat","useSupercluster","options","radius","maxZoom","clusters","supercluster","defaultProps","center","lng","item","index","value","onClick","onChange","e","chartType","width","height","explorer","chart","title","placeholder","val","filteredArr","filter","includes","toLowerCase","unfilteredArr","temp","searchFunc","target","showRowNumber","allowHtml","bootstrapURLKeys","key","defaultCenter","defaultZoom","yesIWantToUseGoogleMapApiInternals","onGoogleApiLoaded","current","nw","se","longitude","latitude","isCluster","pointCount","point_count","expansionZoom","Math","min","getClusterExpansionZoom","id","panTo","href","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.bab5dc00.chunk.js","sourcesContent":["import './App.css';\r\nimport React, { useState, useEffect , useRef} from 'react';\r\nimport { Chart } from \"react-google-charts\";\r\nimport useSupercluster from \"use-supercluster\"\r\nimport GoogleMapReact from 'google-map-react';\r\n\r\nfunction App() {\r\n\r\n  const proxyurl = \"https://ahmadmarhaba-ws-product-nodejs.herokuapp.com\"\r\n  const pages = [\"General Charts\", \"Data Table\", \"Geo Map\"];\r\n  const [page,SetPage] = useState(0)  \r\n\r\n  const poiHeader = [\"Id\",\"Name\",\"Latitude\",\"Longitude\"];\r\n  const [poiTable,SetPoiTable] = useState(null)\r\n  const [filteredPoi,SetFilteredPoi] = useState(null)\r\n  \r\n  const [poiGeo,SetPoiGeo] = useState(null)\r\n\r\n  const [dataType,SetDatatype] = useState(0)\r\n  \r\n  const [hourlyStats,SetHourlyStats] = useState(null)\r\n  const [dailyStats,SetDailyStats] = useState(null)\r\n  \r\n  const [hourlyEvent,SetHourlyEvent] = useState(null)\r\n  const [dailyEvent,SetDailyEvent] = useState(null)\r\n  const visuals = [\"Line\", \"Bar\", \"LineChart\", \"BarChart\"];\r\n  const [eventVisual,SetEventVisual] = useState(\"Line\")  \r\n  const [eventVisualSelected,SetEventVisualSelected] = useState(0)  \r\n  \r\n  const [hourlyEventError,SetHourlyEventError] = useState(false)\r\n  const [dailyEventError,SetDailyEventError] = useState(false)\r\n\r\n  const [hourlyStatsError,SetHourlyStatsError] = useState(false)\r\n  const [dailyStatsError,SetDailyStatsError] = useState(false)\r\n\r\n  const [poiError,SetPoiError] = useState(false)\r\n  \r\n\r\n  useEffect(()=>{\r\n\r\n    hourlyEvent === null && fetch(proxyurl+'/events/hourly').then(response => response.json()).then(data => {\r\n      if(data.response === \"Error\"){\r\n        SetHourlyEventError(true)\r\n        return;\r\n      }\r\n      let array = [[\"Date\",\"Events\",\"Hour\"]];\r\n      data.forEach(element => {\r\n        array.push([(new Date(element.date)).toDateString(),parseInt(element.events),element.hour])\r\n      });\r\n      SetHourlyEvent(array)\r\n    }).catch(err => { console.error(err)});\r\n  },[hourlyEvent])\r\n  useEffect(()=>{\r\n    dailyEvent === null && fetch(proxyurl+'/events/daily').then(response => response.json()).then(data => {\r\n      if(data.response === \"Error\"){\r\n        SetDailyEventError(true)\r\n        return;\r\n      }\r\n      let array = [[\"Date\",\"Events\"]];\r\n      data.forEach(element => {\r\n        array.push([(new Date(element.date)).toDateString(),parseInt(element.events)])\r\n      });\r\n      SetDailyEvent(array)\r\n    }).catch(err => { console.error(err)});;\r\n  },[dailyEvent])\r\n  useEffect(()=>{\r\n    hourlyStats=== null && fetch(proxyurl+'/stats/hourly').then(response => response.json()).then(data => {\r\n      if(data.response === \"Error\"){\r\n        SetHourlyStatsError(true)\r\n        return;\r\n      }\r\n      let array = [[\"date\",\"hour\",\"impressions\",\"clicks\", \"revenue\"]];\r\n      data.forEach(element => {\r\n        array.push([(new Date(element.date)).toDateString(),parseInt(element.hour),parseInt(element.impressions),parseInt(element.clicks),parseInt(element.revenue)])\r\n      });\r\n      SetHourlyStats(array)\r\n    }).catch(err => { console.error(err)});;\r\n  },[hourlyStats])\r\n  useEffect(()=>{\r\n    dailyStats === null && fetch(proxyurl+'/stats/daily').then(response => response.json()).then(data => {\r\n      if(data.response === \"Error\"){\r\n        SetDailyStatsError(true)\r\n        return;\r\n      }\r\n      let array = [[\"date\",\"impressions\",\"clicks\", \"revenue\"]];\r\n      data.forEach(element => {\r\n        array.push([(new Date(element.date)).toDateString(),parseInt(element.impressions),parseInt(element.clicks),parseInt(element.revenue)])\r\n      });\r\n      SetDailyStats(array)\r\n    }).catch(err => { console.error(err)});;\r\n  },[dailyStats])\r\n  useEffect(()=>{\r\n    poiTable === null && fetch(proxyurl+'/poi').then(response => response.json()).then(data => {\r\n      if(data.response === \"Error\"){\r\n        SetPoiError(true)\r\n        return;\r\n      }\r\n      let arrTable = [];\r\n\r\n      data.forEach(element => {\r\n        arrTable.push([{ v: element.poi_id, f: element.poi_id.toString(), p: {style: ''} },{ v: element.name, f: element.name, p: {style: ''} },{ v: element.lat, f: element.lat.toString(), p: {style: ''} },{ v: element.lon, f: element.lon.toString(), p: {style: ''} } ]);\r\n      });\r\n      SetFilteredPoi(arrTable)\r\n      SetPoiTable(arrTable)\r\n      SetPoiGeo(data)\r\n    }).catch(err => { console.error(err)});;\r\n  },[poiTable])\r\n\r\n  const mapRef = useRef();\r\n  const [bounds, setBounds] = useState(null);\r\n  const [zoom, setZoom] = useState(10);\r\n\r\n  const crimes = poiGeo != null && poiGeo.length > 0 ? poiGeo.slice(0, 2000) : [];\r\n\r\n  const points = crimes.map(poi => ({\r\n    type: \"Feature\",\r\n    properties: { cluster: false, poiId: poi.poi_id, name: poi.name },\r\n    geometry: {\r\n      type: \"Point\",\r\n      coordinates: [\r\n        parseFloat(poi.lon),\r\n        parseFloat(poi.lat)\r\n      ]\r\n    }\r\n  }));\r\n const { clusters, supercluster } = useSupercluster({\r\n   points,\r\n   bounds,\r\n   zoom,\r\n   options: { radius: 75, maxZoom: 20 }\r\n  });\r\n\r\n\r\n  \r\n  function searchFunc(val){\r\n    poiTable.forEach(element => {\r\n      element.forEach(item => {\r\n        item.p.style = \"\";\r\n      });\r\n    });\r\n    \r\n    let filteredArr = poiTable.filter( element =>{ return element[0].f.includes(val) || element[1].f.toLowerCase().includes(val) || element[2].f.includes(val) || element[3].f.includes(val) });\r\n    let unfilteredArr = poiTable.filter( element =>{ return !element[0].f.includes(val) && !element[1].f.toLowerCase().includes(val) && !element[2].f.includes(val) && !element[3].f.includes(val) });\r\n\r\n    SetFilteredPoi(() => {\r\n      let temp = [...filteredArr];\r\n      if(val.length > 0){\r\n        [...temp].forEach(element => {\r\n          element.forEach(item => {\r\n            item.p.style = \"background-color:#baff9d;\";\r\n          });\r\n        });\r\n      }\r\n      return [...temp, ...unfilteredArr];\r\n    });\r\n  }\r\n\r\n  const defaultProps = {\r\n    center: {\r\n      lat: 51.231487,\r\n      lng: -99.306211\r\n    },\r\n    zoom: 5\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <ul className=\"topNav\">\r\n        <li>\r\n          <span>WS Product React</span>\r\n        </li>\r\n        {\r\n          pages.map((item , index)=>{\r\n            return (\r\n              <li key={index}>\r\n                <input type=\"button\" value={item} className={page === index ? \"selectedButton\" : ''} onClick={() => { SetPage(index) }}/>\r\n              </li>\r\n            )\r\n          })\r\n        }\r\n      </ul>\r\n        <div className={`view ${page !== 0 ? 'noNav' : ''}`}>\r\n\r\n        \r\n      {\r\n        page === 0 && <>\r\n        <ul className=\"leftNav\">\r\n          <h3>Data Type</h3>\r\n        <li>\r\n          <label className={dataType === 0 ? \"selectedButton\" : ''}>\r\n            <input type=\"radio\" value={0} name=\"dataType\" onChange={ (e) => {SetDatatype(0)}} /> Events\r\n          </label>\r\n          <label className={dataType === 1 ? \"selectedButton\" : ''}>\r\n            <input type=\"radio\" value={1} name=\"dataType\" onChange={ (e) => {SetDatatype(1)}} /> Stats\r\n          </label>\r\n        </li>\r\n        <h3>Data Visual</h3>\r\n        {\r\n          visuals.map((item , index)=>{\r\n            return (\r\n              <li key={index}>\r\n                <input type=\"button\" value={item} className={eventVisualSelected === index ? \"selectedButton\" : ''} onClick={() => { SetEventVisual(item); SetEventVisualSelected(index); }}/>\r\n              </li>\r\n            )\r\n          })\r\n        }\r\n      </ul>\r\n      <div className='dataContain'>   \r\n        {\r\n          dataType === 1 ? <>\r\n          {\r\n          dailyStats ? <Chart chartType={eventVisual} width=\"96%\" height=\"400px\" data={dailyStats} options={{\r\n            explorer: {},\r\n            chart: {\r\n              title: \"Events Daily\"\r\n            },\r\n          }} /> : dailyStatsError ? <ErrorDataRequest /> : <Loading />\r\n        }\r\n        <br /><br />\r\n        {\r\n          hourlyStats ? <Chart chartType={eventVisual} width=\"96%\" height=\"400px\" data={hourlyStats} options={{\r\n            explorer: {},\r\n            chart: {\r\n              title: \"Events Hourly\"\r\n            },\r\n          }} /> : hourlyStatsError ? <ErrorDataRequest /> : <Loading />\r\n        }\r\n          </> : <>\r\n          {\r\n          dailyEvent ? <Chart chartType={eventVisual} width=\"96%\" height=\"400px\" data={dailyEvent} options={{\r\n            explorer: {},\r\n            chart: {\r\n              title: \"Events Daily\"\r\n            },\r\n          }} /> : dailyEventError ? <ErrorDataRequest /> : <Loading />\r\n          }\r\n          <br /><br />\r\n          {\r\n            hourlyEvent ? <Chart chartType={eventVisual} width=\"96%\" height=\"400px\" data={hourlyEvent} options={{\r\n              explorer: {},\r\n              chart: {\r\n                title: \"Events Hourly\"\r\n              },\r\n            }} /> : hourlyEventError ? <ErrorDataRequest /> : <Loading />\r\n          }\r\n          </>\r\n        }\r\n        </div>\r\n        </>\r\n      }\r\n      {\r\n        page === 1 && <>\r\n        {\r\n          poiTable && poiTable.length ? <>\r\n          <input type=\"text\" placeholder='Search here...' onChange={(e)=>{ searchFunc(e.target.value.toLowerCase()) }}/>\r\n          <Chart chartType=\"Table\" width=\"100%\" height=\"100%\" data={[poiHeader , ...filteredPoi]} options={{\r\n            showRowNumber: false, \r\n            allowHtml: true,\r\n          }} />\r\n        </>: poiError ? <ErrorDataRequest /> : <Loading />\r\n        }\r\n        </>\r\n      }\r\n      {\r\n        page === 2 && <>\r\n         {\r\n           poiTable && poiTable.length && clusters ? <GoogleMapReact\r\n           bootstrapURLKeys={{ key: \"AIzaSyAKm8MCGBPYCd9mwXqXtHYf_vFM2BtglIA\" }}\r\n           defaultCenter={defaultProps.center}\r\n           defaultZoom={defaultProps.zoom}\r\n           yesIWantToUseGoogleMapApiInternals\r\n           onGoogleApiLoaded={({ map }) => {\r\n             mapRef.current = map;\r\n           }}\r\n           onChange={({ zoom, bounds }) => {\r\n             setZoom(zoom);\r\n             setBounds([\r\n               bounds.nw.lng,\r\n               bounds.se.lat,\r\n               bounds.se.lng,\r\n               bounds.nw.lat\r\n             ]);\r\n           }}\r\n         >\r\n           {  clusters.map(cluster => {\r\n             const [longitude, latitude] = cluster.geometry.coordinates;\r\n             const {\r\n               cluster: isCluster,\r\n               point_count: pointCount\r\n             } = cluster.properties;\r\n   \r\n             if (isCluster) {\r\n               return (\r\n                 <Marker\r\n                   key={`cluster-${cluster.id}`}\r\n                   lat={latitude}\r\n                   lng={longitude}\r\n                 >\r\n                   <div\r\n                     className=\"cluster-marker\"\r\n                     style={{\r\n                       width: `${10 + (pointCount / points.length) * 20}px`,\r\n                       height: `${10 + (pointCount / points.length) * 20}px`\r\n                     }}\r\n                     onClick={() => {\r\n                       const expansionZoom = Math.min(\r\n                         supercluster.getClusterExpansionZoom(cluster.id),\r\n                         20\r\n                       );\r\n                       mapRef.current.setZoom(expansionZoom);\r\n                       mapRef.current.panTo({ lat: latitude, lng: longitude });\r\n                     }}\r\n                   >\r\n                     {pointCount}\r\n                   </div>\r\n                 </Marker>\r\n               );\r\n             }\r\n   \r\n             return (\r\n               <Marker\r\n                 key={`poi-${cluster.properties.poiId}`}\r\n                 lat={latitude}\r\n                 lng={longitude}\r\n               >\r\n                 <button className=\"poi-marker\">\r\n                   <img src=\"https://img.icons8.com/plasticine/100/000000/place-marker.png\" alt=\"poi doesn't pay\" />\r\n                   <ul>\r\n                     <li>{cluster.properties.name}</li>\r\n                     <li>{`Latitude: ` + latitude}</li>\r\n                     <li>{`Longitude: `+longitude}</li>\r\n                   </ul>\r\n                 </button>\r\n               </Marker>\r\n             );\r\n           })}\r\n         </GoogleMapReact> : poiError ? <ErrorDataRequest /> : <Loading />\r\n         }\r\n        </>\r\n         \r\n      }\r\n      </div>\r\n      <div className='footer'>\r\n        <ul>\r\n          <li>My Github <a href='https://github.com/ahmadmarhaba'>Ahmad Marhaba</a> </li>\r\n          <li>{`Page ${page+1} / 3`} </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    \r\n  );\r\n}\r\n\r\n\r\nconst Marker = ({ children }) => children;\r\nconst Loading = () => <div className='loading'><span>Loading</span><img src={`/ws-product-react/loading.gif`} alt='...'/></div>;\r\nconst ErrorDataRequest = () => <div className='loading error'><span>Too many calls been made. Try again later.</span></div>;\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n // <React.StrictMode>\n    <App />\n  //</React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}